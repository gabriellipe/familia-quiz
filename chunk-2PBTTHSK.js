import{A as F,B as q,C as D,D as p,E as O,F as R,G as l,H as h,I as g,K as N,M as $,P as L,Q as m,T as V,V as W,X as u,Y as B,c as M,e as S,g as w,h as E,i as _,k as o,l as c,m as C,n as A,o as y,p as T,q as k,r as P,s as b,t as v,u as f,v as j,w as a,x as d,y as Q,z}from"./chunk-WQNKN3D6.js";var U=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=c({type:i,selectors:[["app-quiz-progress"]],inputs:{currentQuestion:"currentQuestion",progressText:"progressText",score:"score",progressWidth:"progressWidth"},decls:20,vars:9,consts:[[1,"surface","rounded-xl","shadow-lg","p-6","mb-6"],[1,"flex","justify-between","items-center","mb-4"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","bg-primary","text-white","rounded-full","flex","items-center","justify-center","font-bold"],[1,"text-lg","font-semibold"],[1,"text-sm","text-muted"],[1,"text-right"],[1,"text-2xl","font-bold","text-primary"],[1,"w-full","bg-progress-track","rounded-full","h-3","overflow-hidden"],[1,"h-full","bg-gradient-to-r","from-primary","to-blue-600","rounded-full","transition-all","duration-500","ease-out"],[1,"text-xs","text-muted","mt-2","text-center"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),l(4),d(),a(5,"div")(6,"h1",4),l(7,"Quiz da Fam\xEDlia"),d(),a(8,"span",5),l(9),d()()(),a(10,"div",6)(11,"div",5),l(12,"Acertos"),d(),a(13,"div",7),l(14),d()()(),a(15,"div",8),Q(16,"div",9),d(),a(17,"div",10),l(18),N(19,"number"),d()()),t&2&&(o(4),g(" ",n.currentQuestion," "),o(5),g("Pergunta ",n.progressText),o(5),h(n.score),o(2),O("width",n.progressWidth+"%"),o(2),g(" ",$(19,6,n.progressWidth,"1.0-0"),"% conclu\xEDdo "))},dependencies:[m,L],encapsulation:2,changeDetection:0});let s=i;return s})();var H=(()=>{let i=class i{constructor(){this.disabled=!1,this.buttonClass="state-neutral",this.isSelected=!1,this.selectAlternative=new C}onSelect(){this.disabled||this.selectAlternative.emit(this.index)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=c({type:i,selectors:[["app-quiz-alternative-button"]],inputs:{alternative:"alternative",index:"index",disabled:"disabled",buttonClass:"buttonClass",isSelected:"isSelected"},outputs:{selectAlternative:"selectAlternative"},decls:5,vars:4,consts:[[1,"w-full","p-5","rounded-xl","text-left","transition-all","duration-300","border-2","focus:outline-none","focus:ring-2","focus:ring-primary","focus:ring-offset-2","alternative-hover","cursor-pointer",3,"click","disabled"],[1,"flex","items-start","gap-3"],[1,"w-6","h-6","rounded-full","border-2","border-current","flex","items-center","justify-center","flex-shrink-0","mt-1"],[1,"font-medium","leading-relaxed","text-lg","md:text-base"]],template:function(t,n){t&1&&(a(0,"button",0),D("click",function(){return n.onSelect()}),a(1,"div",1),Q(2,"div",2),a(3,"span",3),l(4),d()()()),t&2&&(R(n.buttonClass),F("disabled",n.disabled),o(4),h(n.alternative.texto))},dependencies:[m],encapsulation:2,changeDetection:0});let s=i;return s})();function K(s,i){if(s&1){let r=z();v(0,"div",6)(1,"app-quiz-alternative-button",7),q("selectAlternative",function(t){E(r);let n=p();return _(n.onSelectAlternative(t))}),f()()}if(s&2){let r=i.$implicit,e=i.$index,t=p();o(),b("alternative",r)("index",e)("disabled",t.isAnswered)("buttonClass",t.getAlternativeClass(e))("isSelected",t.isSelected(e))}}var G=(()=>{let i=class i{constructor(){this.selectedAlternative=void 0,this.selectAlternative=new C}get isAnswered(){return this.answerState!==u.NAO_RESPONDIDA}onSelectAlternative(e){this.isAnswered||this.selectAlternative.emit(e)}isSelected(e){return e===this.selectedAlternative}getAlternativeClass(e){if(!this.isAnswered)return"state-neutral";let t=e===this.selectedAlternative,n=e===this.question.indiceRespostaCorreta,x=[];return t&&x.push("state-selected"),n?x.push("state-correct"):x.push("state-incorrect"),!t&&!n&&x.push("opacity-75"),x.join(" ")}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=c({type:i,selectors:[["app-quiz-alternatives"]],inputs:{question:"question",selectedAlternative:"selectedAlternative",answerState:"answerState"},outputs:{selectAlternative:"selectAlternative"},decls:10,vars:1,consts:[[1,"surface","rounded-xl","shadow-lg","p-6","md:p-8"],[1,"flex","items-start","gap-4","mb-8"],[1,"w-8","h-8","bg-indigo-context","rounded-full","flex","items-center","justify-center","flex-shrink-0"],[1,"text-indigo-context","font-bold"],[1,"text-xl","md:text-2xl","font-semibold","leading-relaxed"],[1,"space-y-4"],[1,"mb-4","last:mb-0"],[3,"selectAlternative","alternative","index","disabled","buttonClass","isSelected"]],template:function(t,n){t&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),l(4,"?"),f()(),v(5,"h2",4),l(6),f()(),v(7,"div",5),k(8,K,2,5,"div",6,T),f()()),t&2&&(o(6),h(n.question.pergunta),o(2),P(n.question.alternativas))},dependencies:[m,H],encapsulation:2,changeDetection:0});let s=i;return s})();function X(s,i){if(s&1&&(a(0,"div",6)(1,"p",8),l(2),d()()),s&2){let r=p();o(2),h(r.justification)}}var J=(()=>{let i=class i{constructor(){this.isLastQuestion=!1,this.nextQuestion=new C}get isCorrect(){return this.answerState===u.CORRETA}onNextQuestion(){this.nextQuestion.emit()}getFeedbackClass(){return this.isCorrect?"feedback-correct":"feedback-incorrect"}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=c({type:i,selectors:[["app-quiz-feedback"]],inputs:{answerState:"answerState",motivationalMessage:"motivationalMessage",justification:"justification",isLastQuestion:"isLastQuestion"},outputs:{nextQuestion:"nextQuestion"},decls:12,vars:7,consts:[[1,"mt-8","p-6","rounded-xl","border-2"],[1,"flex","items-center","gap-3","mb-4"],[1,"w-10","h-10","rounded-full","flex","items-center","justify-center","text-xl"],[1,"text-current"],[1,"font-bold","text-lg","text-current"],[1,"text-sm","opacity-75","text-current"],[1,"surface-hover","rounded-lg","p-4","mb-4"],[1,"btn-primary","w-full","md:w-auto","px-8","py-3","rounded-xl","font-semibold","hover:scale-105","transition-transform","duration-200",3,"click"],[1,"text-sm","leading-relaxed"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),l(3),d(),a(4,"div",3)(5,"div",4),l(6),d(),a(7,"div",5),l(8),d()()(),A(9,X,3,1,"div",6),a(10,"button",7),D("click",function(){return n.onNextQuestion()}),l(11),d()()),t&2&&(R(n.getFeedbackClass()),o(3),g(" ",n.isCorrect?"\u2705":"\u274C"," "),o(3),h(n.motivationalMessage),o(2),g(" ",n.isCorrect?"Resposta correta!":"Resposta incorreta"," "),o(),y(n.justification?9:-1),o(2),g(" ",n.isLastQuestion?"\u{1F3C1} Ver Resultado":"\u27A1\uFE0F Pr\xF3xima Pergunta"," "))},dependencies:[m],encapsulation:2,changeDetection:0});let s=i;return s})();function Y(s,i){if(s&1){let r=z();v(0,"app-quiz-feedback",5),q("nextQuestion",function(){E(r);let t=p(2);return _(t.proximaPergunta())}),f()}if(s&2){let r=p(2);b("answerState",r.estadoResposta)("motivationalMessage",r.mensagemMotivacional)("justification",r.justificativa)("isLastQuestion",r.isLastQuestion())}}function Z(s,i){if(s&1){let r=z();v(0,"app-quiz-alternatives",3),q("selectAlternative",function(t){E(r);let n=p();return _(n.responder(t))}),f(),A(1,Y,1,4,"app-quiz-feedback",4)}if(s&2){let r=p();b("question",r.perguntaAtual)("selectedAlternative",r.alternativaSelecionada)("answerState",r.estadoResposta),o(),y(r.estadoResposta!==r.estadoRespostaNaoRespondida?1:-1)}}var Oe=(()=>{let i=class i{constructor(){this.quizService=w(B),this.router=w(W),this.route=w(V),this.destroy$=new M,this.estadoRespostaNaoRespondida=u.NAO_RESPONDIDA,this.estadoRespostaCorreta=u.CORRETA,this.perguntaAtual=this.quizService.perguntaAtual,this.estadoResposta=u.NAO_RESPONDIDA,this.justificativa="",this.mensagemMotivacional="",this.acertos=0,this.alternativaSelecionada=void 0}ngOnInit(){this.route.queryParams.pipe(S(this.destroy$)).subscribe(e=>{let t=e.q;if(t){let n=parseInt(t)-1;n>=0&&n!==this.quizService.perguntaAtualIndex&&this.quizService.irParaPergunta(n)}}),this.quizService.estadoResposta$.pipe(S(this.destroy$)).subscribe(e=>{this.estadoResposta=e}),this.quizService.justificativa$.pipe(S(this.destroy$)).subscribe(e=>{this.justificativa=e}),this.quizService.acertos$.pipe(S(this.destroy$)).subscribe(e=>{this.acertos=e}),this.quizService.perguntaAtualIndex$.pipe(S(this.destroy$)).subscribe(e=>{this.perguntaAtual=this.quizService.perguntaAtual,this.updateUrlWithQuestion(e+1)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}responder(e){this.alternativaSelecionada=e,this.quizService.responder(e),this.mensagemMotivacional=this.quizService.getMensagemMotivacional(this.estadoResposta===u.CORRETA)}proximaPergunta(){this.alternativaSelecionada=void 0,this.quizService.proximaPergunta(),this.perguntaAtual=this.quizService.perguntaAtual,this.quizService.quizFinalizado&&this.router.navigate(["/resultado"])}getProgressWidth(){let e=parseInt(this.quizService.progresso.split("/")[0]||"0"),t=parseInt(this.quizService.progresso.split("/")[1]||"1");if(this.estadoResposta===u.NAO_RESPONDIDA&&e===1)return 0;let n=e-(this.estadoResposta===u.NAO_RESPONDIDA?1:0);return Math.max(0,n/t*100)}getCurrentQuestion(){return parseInt(this.quizService.progresso.split("/")[0]||"0")}isLastQuestion(){let e=parseInt(this.quizService.progresso.split("/")[1]||"1");return parseInt(this.quizService.progresso.split("/")[0]||"0")===e}updateUrlWithQuestion(e){this.router.navigate([],{relativeTo:this.route,queryParams:{q:e},queryParamsHandling:"merge",replaceUrl:!0})}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=c({type:i,selectors:[["app-quiz"]],decls:4,vars:5,consts:[[1,"min-h-screen","bg-app-gradient","p-4","md:p-6"],[1,"max-w-5xl","mx-auto"],[3,"currentQuestion","progressText","score","progressWidth"],[3,"selectAlternative","question","selectedAlternative","answerState"],[3,"answerState","motivationalMessage","justification","isLastQuestion"],[3,"nextQuestion","answerState","motivationalMessage","justification","isLastQuestion"]],template:function(t,n){t&1&&(v(0,"div",0)(1,"div",1),j(2,"app-quiz-progress",2),A(3,Z,2,4),f()()),t&2&&(o(2),b("currentQuestion",n.getCurrentQuestion())("progressText",n.quizService.progresso)("score",n.acertos)("progressWidth",n.getProgressWidth()),o(),y(n.perguntaAtual?3:-1))},dependencies:[m,U,G,J],encapsulation:2,changeDetection:0});let s=i;return s})();export{Oe as QuizComponent};
